# 命令
## 文本处理
1. grep

在文本中进行搜索，得到匹配文本所在行

选项 | 说明
---|---
-v | 匹配不包含匹配文本的行
-A number| 匹配文本及行后共number行
-B number| 匹配文本及行前共number行
-C number| 匹配文本及行前后共number行
-w | 匹配单词
-i | 忽略大小写
-E | 同egrep，可使用正则匹配
-F | 同fgrep，不可使用正则匹配
-r | 当前目录及子目录进行递归查找
-l | 列出匹配行所在的文件
-n | 标记行号
-x | 匹配整行
-c | 列出匹配行的数量
--color=auto| 对匹配关键字进行颜色显示

关键字：
- ^$:代表空行
- ^hello:以hello开头
- hello$:以hello结尾

2. cut

对文本的列进行分割

选项 | 说明
---|---
-d | 指定分割符，默认以制表符作为分割符
-f | 指定要匹配的列
-c | 以字符为单位进行截取

```
cut -d" " -f1,2,3 fileName # 以空格作为分隔符，截取1，2，3列
```

3. sed

流编辑器, 一行一行读取文件内容，将其保存在一个临时缓存区中，根据需求进行处理，将处理后的文本输出到屏幕中，**不会改变原文件的内容**。语法为：sed [option] "pattern command" file

**正则表达式如果出现了(^$.*/[])，需要以前导\作为转义**
**如果匹配的是拓展正则表达式，需要使用-r**
```
grep -E
sed -r
+ ? () {n,m} | \d
```

选项 | 说明
---|---
-n | 取消默认输出
-e | 进行多次(多项)编辑
-r | 使用拓展正则表达式
-i | 原地编辑(修改源文件)
-f | 指定sed脚本的文件名


动作 | 说明
---|---
'p' | 打印
'i' | 在指定行之前插入内容
'a' | 在指定行之后插入内容
'c' | 替换指定行所有内容
'd' | 删除指定行

1）打印文件内容
```
sed '' file.txt # 对文件不操作
sed -n 'p' file.txt # 打印文件每一行，并取消默认输出
sed -n '1p' file.txt # 打印文件第一行
sed -n '1,5p' file.txt # 打印文件第一到五行
sed -n '$p' file.txt # 打印文件最后一行
sed -n '/^root/p' # 打印以root开头的行
```

2）增加文件内容

```
sed '$a123456' fileName # 在文件最后一行后一行增加123456
sed '6i123456' fileName # 在文件第六行前一行增加123456
sed '/^root/a123456' # 在以root开头的行后加123456
```

3) 删除文件内容

```
sed '5d' # 删除第5行
sed '1,4d' # 删除1到4行
sed '1~2d' # 从第一行开始，每隔两行删除，即删除奇数行
sed '1~2!d' # 删除偶数行，！相当于取反
sed '/root/d' # 删除有root的行
sed '$d' # 删除最后一行
```

4）对文件进行搜索替换

sed 选项 's/搜索的内容/替换的内容/动作' fileName
s指搜索，斜杠表示分隔符，动作一般为打印p和全局替换g

命令 | 说明
---|---
& | 保存查找串以便在替换串中替换
= | 打印行号

```
s/hello/world/ #对所有行进行替换
1s/hello/world/   # 对第一行进行替换，hello替换为world
1,5s/hello/world/ # 对1-5行进行替换
1,+5s/hello/world/ # 对1-6行进行替换
1,5s/^/#/ # 对1到5行进行注释

s/^root/#&/ # 对以root开头的行进行注释
s/^[ab]/#&/ # 对以a或b开头的行添加注释
s/[[:digit:]]/#&/ # 对所有数字前加#字
s/.//2 # 删除每行第二个字符
s/.$// # 删除每行最后一个字符

#替换所有字母为大写
echo "hello world" | sed -nr 's/[a-z]/\u&/gp'
#替换所有字母为小写
echo "HELLO world" | sed -nr 's/[A-Z]/\l&/gp'
```

5)结合正则使用

正则 | 说明 | 示例
---|---|---
/key/ | 匹配字符串所在行 | sed -n '/hello/p' test.txt
/key1/,/key2/ | 匹配包含key1到key2之间的行 | sed -n '/^root/,/1$/p' test.txt
/key/,x | 匹配从包含key1到x的行 | sed -n '/^root/,5p' test.txt
x,/key/ | 匹配从x行到key所在行 | sed -n '1,/^root/p' test.txt
x,y! | 不包含x到y的行 | sed -n '1,5!p' test.txt
/key/! | 不包含key所在的行 | sed -n '/hello/!p' test.txt

4. sort

用于排序，
选项 | 说明
---|---
-u | 去掉重复行
-r | 降序排列
-o | 将输出结果输出到文件中
-n | 以数字排序
-t | 分割符
-k | 第n列
-b | 忽略前导空格
-R | 随机排序

```
默认以空行，数字从小到大，大写字母从小到大排序，小写字母从小到大排序
-n 空行，大写字母，小写字母，数字从大到小
```

5. awk



选项 | 说明
---|---
-F | 指定字段分隔符，默认为空格
-f | 指定awk执行脚本
-v | 定义变量并赋值


6. tee
7. diff
8. tr

用于字符的转换，替换和删除，主要用于删除文件中控制字符或进行字符转换
commands | tr 'string1' 'string2'
tr 'string1' 'string2' < fileName
tr [options] 'string1' < fileName

其中 string1用于匹配，string2用于替换
选项 | 说明
---|---
-d | 删除string1中所有字符
-s | 将重复出现字符串压缩

常用匹配字符串
字符串 | 说明
---|---
a-z或[:lower:] | 匹配所有小写字母
A-Z或[:upper:] | 匹配所有大写字母
0-9或[:digit:] | 匹配所有数字
[:alnum:] | 匹配所有字母和数字
[:alpha:] | 匹配所有字母
[:blank:] | 所有水平空白
[:punct:] | 匹配所有标点符号
[:space:] | 匹配所有水平空格和垂直空格
[:cntrl:] | 所有控制字符

```
tr '[0-9]' '@' < test1.txt # 将test1.txt 中数字替换为@
tr '[a-z]' '[A-Z]' < test1.txt # 将test1.txt 中小写字母替换为大写字母
tr -s '[a-z]' < test1.txt # 将文件中小写字母重复的压缩为一个
```

### 通配符
1. *
2. ？
3. [list]
4. [!list]
5. {a,b,c...}

## 文本查看
1. cat

- -b 对非空行编号
- -n 对所有行编号
-
2. head

- -n 查看前n行
3. tail

- -n 查看后n行
- -f 循环读取
4. less

- -i 搜索时忽略大小写
- -N 输出行号
- -m 显示百分比
5. more

- 分页进行查看

## 检索
1. whereis

查找命令所在位置及帮助文档位置

2. which

在系统环境变量PATH下查找命令的执行位置

- which ls
3. find
   find path -option [ -print ] [ -exec -ok command ] {} \;
- -name 按照文件名查找
- -size(+/-) 按照文件大小查找
- -iname 按照文件名查找，忽略大小写
- -atime 过去n天读取过的文件
- -ctime 过去n天修改过的文件
- -type 按照文件类型查找
  f:一般文件，d:目录，

4. locate

相当于(find -name),在/var/lib/locatedb中保存文件所有信息，通过查找这个文件进行快速查找，缺点是不够及时，新创建的文件无法及时同步到locatedb文件中

### 磁盘

### 其他命令

1. 管道命令 ｜

用来将左侧命令的标准输出重定向为标准输入作为右侧命令的参数

2. xargs

将标准输入转为命令行参数，默认参数为echo,一般情况下结合管道符一起使用，单独使用时，按下回车，命令行会等待用户输入，作为标准输入，按下ctrl+D代表结束


选项 | 说明
---|---
-p | 打印出需要执行的命令，询问用户是否需要执行
-t | 打印出最终要执行的命令，不询问用户
-L | 如果标准输入存在多行，可以指定多少行作为一个命令行参数
-n | 指定多少项作为一个命令行参数
-0 | 指定null作为参数的分隔符，相当于-d"\0"
-I | 不使用默认将处理后的参数传递到命令的尾部，但有时候需要传递到任意位置，所以可以指定其他富豪榜作为占位符，-i是指使用默认的{}作为占位符。

```
//在当前目录搜索sh脚本，对每个脚本执行一次grep命令
find . -name "*.sh" | xargs grep "hello"
```

```
# 指定一行作为一个参数
$ xargs -L 1 find . -name
"*.txt"
"*.md"

find . -name "*.sh" -print0 | xargs

ls | xargs -I {} mv {} {}.sh
```
#### xargs和 | 的区别

| 是将前一个参数的标准输出作为后一个参数的标准输入，而xargs是将前一个参数的标准输出作为后一个参数的参数（默认在命令的尾部，可以使用 -i/-I 来指定参数的位置）

```
$ echo "test.txt" | cat
test.txt

$ echo "test.txt" | xargs cat
1+2

```
3. wc


选项 | 命令
---|---
-l | 查看行数
-w | 显示字数
-c | 显示字符数
